<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %}</title>
    <script src="https://unpkg.com/htmx.org@1.9.5"
        integrity="sha384-xcuj3WpfgjlKF+FXhSQFQ0ZNr39ln+hwjN3npfM9VBnUskLolQAcN80McRIVOPuO"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/assets/css/partials/base.css" />
    <script type="text/javascript" src="/assets/js/main.js"></script>
    {% block head %}{% endblock %}
</head>

<nav id="navbar">
    <div class="nav-container">
        <header class="nav-logo" >
            <a href="/catalog" hx-boost="true">
                <svg viewBox="0 0 250 50" width="250px" height="50px">
                    <use href="/assets/img/main.svg#logo" />
                </svg>   
            </a>
        </header>
        {% block searchbar %}
            <div class="searchContainer">
                <form action="/search" class="searchbar" hx-boost="true" autocomplete="off">
                    <input 
                        id="search-input"
                        name="query" 
                        type="text" 
                        placeholder="What film are you looking for?" 
                        class="search-box " 
                        required minlength="3" maxlength="{{ crate::search::MAX_QUERY_LEN }}"
                        hx-get="/search/autosuggest" hx-trigger="input changed delay:200ms, search" hx-target="#autosuggest-results" hx-swap="outerHTML" hx-validate="true"
                        onblur="closeAutosuggest()"
                        oninput="hideSuggest()"
                    />
                    <div id="clear-text">
                        <button id="clear" type="reset" onclick="document.querySelector('.autosuggest-results').style.display = 'none'">X</button>
                    </div>
                    <button id="search-button" type="submit" class="search-button" onclick="document.querySelector('.autosuggest-results').style.display = 'none'">
                        <svg width="20" height="20" viewBox="0 0 24 24">
                            <use href="/assets/img/main.svg#search-logo" />
                        </svg>
                    </button>
                </form>
                <ul id="autosuggest-results" class="autosuggest-results" hx-boost="true" style="display: none;"></ul> 
            </div>
        {% endblock %}
    </div>
</nav>

<body>
    <div id="content">
        {% block content %}{% endblock %}
    </div>
    <a href="https://github.com/szattila98/binge_at_home" class="github-logo">
        <svg viewBox="0 0 24 24" width="50px" height="50px">
            <use href="/assets/img/main.svg#github-logo" />
        </svg>
    </a>
</body>

</html>
